checkmate =
f2 -> f4
e7 -> e5
g2 -> g4
d8 -> h4

diagonal pawn capture =
d2 -> d4
e7 -> e5
d4


TODO
 - add “you selected piece x” to flash
 - if the user enters an invalid move, the possible moves stop flashing


KING_THREAT_VECTORS
  - all squares in each direction in which the king is currently
    threatened

ALLY_POSSIBLE_MOVES
  - all squares in which the threatened king’s allies could move

KING_POSSIBLE_MOVES
  - all squares in which the king could move

for each KING_POSSIBLE_MOVES do |POSSIBLE_MOVE|
  evaluate threat vectors for POSSIBLE_MOVE
   if there are none, POSSIBLE_MOVE is valid
   else, remove that possible move

for each ALLY_POSSIBLE_MOVES do |POSSIBLE_MOVE|
  if POSSIBLE_MOVE exists in KING_THREAT_VECTORS
    simulate moving the piece to POSSIBLE_MOVE
      recalculate KING_THREAT_VECTORS.
        * if there are none, POSSIBLE_MOVE is valid

if there are no POSSIBLE_MOVES, checkmate!
